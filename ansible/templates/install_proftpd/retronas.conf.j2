## RetroNAS Configuration
## This is autogenerated. Changes will be lost.

# Listen on all IPs
DefaultAddress 0.0.0.0

# Set the server name
ServerName "RetroNAS"

# Set the path for authorised users
DefaultRoot "{{ retronas_path }}"

# Set the Linux on-disk permissions to match the RetroNAS user
User "{{ retronas_user }}"
Group "{{ retronas_group }}"

# Allow writes from the RetroNAS user
<Directory "{{ retronas_path }}">
  <Limit ALL>
    AllowUser "{{ retronas_user }}"
  </Limit>
</Directory>

# Set the path and read-only for anonymous user
<Anonymous "{{ retronas_path }}"> 
  # Don't require password for anonymous
  AnonRequirePassword off
  # Map read-only permissions to RetroNAS user
  UserAlias anonymous "{{ retronas_user }}"
  # Deny writes for anonymous user
  <Directory "{{ retronas_path }}">
    <Limit WRITE>
      DenyAll
    </Limit>
  </Directory>
</Anonymous>
